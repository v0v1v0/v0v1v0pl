<div class="container">

<table style="width: 100%;"><tr>
<td>Correlation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Correlation Analysis</h2>

<h3>Description</h3>

<p>Abbreviation: <code>cr</code>, <code>cr_brief</code>
</p>
<p>For two variables, yields the correlation coefficient with hypothesis test and confidence interval. For a data frame or list of variables from a data frame, yields the correlation matrix. The default computed coefficient(s) are the standard Pearson's product-moment correlation, with Spearman and Kendall coefficients available. For the default missing data technique of pairwise deletion, an analysis of missing data for each computed correlation coefficient is provided. For a correlation matrix a statistical summary of the missing data across all cells is provided.
</p>
<p>Versions of this function from <code>lessR</code> 3.3 or earlier returned just a correlation matrix.  Now other values are returned as well so that the correlation matrix is now stored as part of a returned list in <code>R</code>, directly available, for example, as <code>mycor$R</code> from <code>mycor &lt;- cr(d)</code>. This revision is automatically adjusted for in the <code>lessR</code> routines that read the subsequent correlation matrix, so all pre-existing code continues to work. That is, the input into any of these routines could be, for example, <code>mycor</code>, <code>mycor$R</code> or a stand-alone correlation matrix such as in pre-<code>lessR</code> 3.3.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Correlation(x, y, data=d,
         miss=c("pairwise", "listwise", "everything"),
         fill_low=NULL, fill_hi=NULL,
         show_n=NULL, brief=FALSE,
         digits_d=NULL, heat_map=TRUE,
         main=NULL, bottom=3, right=3,
         pdf=FALSE, width=5, height=5, ...)

cr_brief(..., brief=TRUE) 

cr(...) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>First variable, or list of variables for a correlation matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Second variable or not specified if the first argument is a list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Optional data frame that contains the variables of interest,
default is <code>d</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>miss</code></td>
<td>
<p>Basis for deleting missing data values_</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_low</code></td>
<td>
<p>Starting color for a custom sequential palette.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_hi</code></td>
<td>
<p>Ending color for a custom sequential palette.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_n</code></td>
<td>
<p>For pairwise deletion, show the matrix of sample sizes for each
correlation coefficient, regardless of sample size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>brief</code></td>
<td>
<p>Pertains to a single correlation coefficient analysis. If 
<code>FALSE</code>, then the sample covariance and number of non-missing
and missing observations are displayed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits_d</code></td>
<td>
<p>Specifies the number of decimal digits to display in the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>heat_map</code></td>
<td>
<p>If <code>TRUE</code>, generate a heat map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>Graph title of heat map. Set to <code>main=""</code> to turn off.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bottom</code></td>
<td>
<p>Number of lines of bottom margin of heat map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>right</code></td>
<td>
<p>Number of lines of right margin of heat map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdf</code></td>
<td>
<p>If <code>TRUE</code>, generate the heat map
and write to pdf files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>Width of the pdf file in inches.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>Height of the pdf file in inches.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other parameter values for internally called functions, which
include <code>method="spearman"</code> and <code>method="kendall"</code> and also
<code>alternative="less"</code> and <code>alternative="more"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When two variables are specified, both <code>x</code> and y, the output is the correlation coefficient with hypothesis test, for a null hypothesis of 0, and confidence interval. Also displays the sample covariance. Based on R functions <code>cor</code>, <code>cor.test</code>, <code>cov</code>.
</p>
<p>In place of two variables <code>x</code> and <code>y</code>, <code>x</code> can be a complete data frame, either specified with the name of a data frame, or blank to rely upon the default data frame <code>d</code>. Or, <code>x</code> can be a list of variables from the input data frame. In these situations <code>y</code> is missing. Any non-numeric variables in the data frame or specified variable list are automatically deleted from the analysis. 
</p>
<p>When <code>heat_map=TRUE</code>, generate a heat map to standard graphics windows. Set <code>pdf=TRUE</code> to generate these graphics but have them directed to their respective pdf files.
</p>
<p>For treating missing data, the default is <code>pairwise</code>, which means that an observation is deleted only for the computation of a specific correlation coefficient if one or both variables are missing the value for the relevant variable(s).  For <code>listwise</code> deletion, the entire observation is deleted from the analysis if any of its data values are missing.  For the more extreme <code>everything</code> option, any missing data values for a variable result in all correlations for that variable reported as missing.
</p>


<h3>Value</h3>

<p>From versions of <code>lessR</code> of 3.3 and earlier, if a correlation matrix is computed, the matrix is returned. Now more values are returned, so the matrix is embedded in a list of returned elements.
</p>
<p>READABLE OUTPUT<br></p>
<p>single coefficient<br><code>out_background</code>: Variables in the model, any variable labels<br><code>out_describe</code>: Estimated coefficients<br><code>out_inference</code>: Hypothesis test and confidence interval estimated coefficient<br></p>
<p>matrix<br><code>out_background</code>: Variables in the model, any variable labels<br><code>out_missing</code>: Missing values analysis<br><code>out_cor</code>: Correlations<br></p>
<p>STATISTICS<br></p>
<p>single coefficient<br><code>r</code>: Model formula that specifies the model<br><code>tvalue</code>: t-statistic of estimated value of null hypothesis of no relationship<br><code>df</code>: Degrees of freedom of hypothesis test 
<code>pvalue</code>: Number of rows of data submitted for analysis<br><code>lb</code>: Lower bound of confidence interval<br><code>ub</code>: Upper bound of confidence interval<br></p>
<p>matrix<br><code>R</code>: Correlations<br></p>
<p>Usually assign the name of <code>mycor</code> to the output matrix, as in following examples. This matrix is ready for input into any of the <code>lessR</code> functions that analyze correlational data, including confirmatory factor analysis by <code>corCFA</code> and also exploratory factor analysis, either the standard R function <code>factanal</code> or the <code>lessR</code> function <code>corEFA</code> 
</p>


<h3>Author(s)</h3>

<p>David W. Gerbing (Portland State University; <a href="mailto:gerbing@pdx.edu">gerbing@pdx.edu</a>)</p>


<h3>References</h3>

<p>Gerbing, D. W. (2023). <em>R Data Analysis without Programming: Explanation and Interpretation</em>, 2nd edition, Chapter 10, NY: Routledge.
</p>


<h3>See Also</h3>

<p><code>cor.test</code>, <code>cov</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># data
n &lt;- 12
f &lt;- sample(c("Group1","Group2"), size=n, replace=TRUE)
x1 &lt;- round(rnorm(n=n, mean=50, sd=10), 2)
x2 &lt;- round(rnorm(n=n, mean=50, sd=10), 2)
x3 &lt;- round(rnorm(n=n, mean=50, sd=10), 2)
x4 &lt;- round(rnorm(n=n, mean=50, sd=10), 2)
d &lt;- data.frame(f,x1, x2, x3, x4)
rm(f); rm(x1); rm(x2); rm(x3); rm(x4)

# correlation and covariance
Correlation(x1, x2)
# short name
cr(x1, x2)
# brief form of output
cr_brief(x1, x2)

# Spearman rank correlation, one-sided test
Correlation(x1, x2, method="spearman", alternative="less")

# correlation matrix of the numerical variables in mycor
mycor &lt;- Correlation()

# correlation matrix of Kendall's tau coefficients
mycor &lt;- cr(method="kendall")

# correlation matrix of specified variables in mycor with heat_map
mycor &lt;- Correlation(x1:x3, heat_map=TRUE)

# analysis with data not from data frame mycor
data(attitude)
mycor &lt;- Correlation(rating, learning, data=attitude)

# analysis of entire data frame that is not mycor
data(attitude)
mycor &lt;- Correlation(attitude)
</code></pre>


</div>