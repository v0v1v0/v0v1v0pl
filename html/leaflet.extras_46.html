<div class="container">

<table style="width: 100%;"><tr>
<td>addGeoJSONv2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adds a GeoJSON/TopoJSON to the leaflet map.</h2>

<h3>Description</h3>

<p>This is a feature rich alternative to the <code>addGeoJSON</code> &amp; <code>addTopoJSON</code>
with options to map feature properties to labels, popups, colors, markers etc.
</p>


<h3>Usage</h3>

<pre><code class="language-R">addGeoJSONv2(
  map,
  geojson,
  layerId = NULL,
  group = NULL,
  markerType = NULL,
  markerIcons = NULL,
  markerIconProperty = NULL,
  markerOptions = leaflet::markerOptions(),
  clusterOptions = NULL,
  clusterId = NULL,
  labelProperty = NULL,
  labelOptions = leaflet::labelOptions(),
  popupProperty = NULL,
  popupOptions = leaflet::popupOptions(),
  stroke = TRUE,
  color = "#03F",
  weight = 5,
  opacity = 0.5,
  fill = TRUE,
  fillColor = color,
  fillOpacity = 0.2,
  dashArray = NULL,
  smoothFactor = 1,
  noClip = FALSE,
  pathOptions = leaflet::pathOptions(),
  highlightOptions = NULL
)

legendOptions(
  title = NULL,
  position = c("bottomleft", "bottomright", "topleft", "topright"),
  locale = "en-US",
  numberFormatOptions = list(style = "decimal", maximumFractionDigits = 2)
)

addGeoJSONChoropleth(
  map,
  geojson,
  layerId = NULL,
  group = NULL,
  valueProperty,
  labelProperty = NULL,
  labelOptions = leaflet::labelOptions(),
  popupProperty = NULL,
  popupOptions = leaflet::popupOptions(),
  scale = c("white", "red"),
  steps = 5,
  mode = "q",
  channelMode = c("rgb", "lab", "hsl", "lch"),
  padding = NULL,
  correctLightness = FALSE,
  bezierInterpolate = FALSE,
  colors = NULL,
  stroke = TRUE,
  color = "#03F",
  weight = 1,
  opacity = 0.5,
  fillOpacity = 0.2,
  dashArray = NULL,
  smoothFactor = 1,
  noClip = FALSE,
  pathOptions = leaflet::pathOptions(),
  highlightOptions = NULL,
  legendOptions = NULL
)

addKML(
  map,
  kml,
  layerId = NULL,
  group = NULL,
  markerType = NULL,
  markerIcons = NULL,
  markerIconProperty = NULL,
  markerOptions = leaflet::markerOptions(),
  clusterOptions = NULL,
  clusterId = NULL,
  labelProperty = NULL,
  labelOptions = leaflet::labelOptions(),
  popupProperty = NULL,
  popupOptions = leaflet::popupOptions(),
  stroke = TRUE,
  color = "#03F",
  weight = 5,
  opacity = 0.5,
  fill = TRUE,
  fillColor = color,
  fillOpacity = 0.2,
  dashArray = NULL,
  smoothFactor = 1,
  noClip = FALSE,
  pathOptions = leaflet::pathOptions(),
  highlightOptions = NULL
)

addKMLChoropleth(
  map,
  kml,
  layerId = NULL,
  group = NULL,
  valueProperty,
  labelProperty = NULL,
  labelOptions = leaflet::labelOptions(),
  popupProperty = NULL,
  popupOptions = leaflet::popupOptions(),
  scale = c("white", "red"),
  steps = 5,
  mode = "q",
  channelMode = c("rgb", "lab", "hsl", "lch"),
  padding = NULL,
  correctLightness = FALSE,
  bezierInterpolate = FALSE,
  colors = NULL,
  stroke = TRUE,
  color = "#03F",
  weight = 1,
  opacity = 0.5,
  fillOpacity = 0.2,
  dashArray = NULL,
  smoothFactor = 1,
  noClip = FALSE,
  pathOptions = leaflet::pathOptions(),
  highlightOptions = NULL,
  legendOptions = NULL
)

csvParserOptions(latfield, lonfield, delimiter = ",")

addCSV(
  map,
  csv,
  csvParserOptions,
  layerId = NULL,
  group = NULL,
  markerType = NULL,
  markerIcons = NULL,
  markerIconProperty = NULL,
  markerOptions = leaflet::markerOptions(),
  clusterOptions = NULL,
  clusterId = NULL,
  labelProperty = NULL,
  labelOptions = leaflet::labelOptions(),
  popupProperty = NULL,
  popupOptions = leaflet::popupOptions(),
  stroke = TRUE,
  color = "#03F",
  weight = 5,
  opacity = 0.5,
  fill = TRUE,
  fillColor = color,
  fillOpacity = 0.2,
  dashArray = NULL,
  smoothFactor = 1,
  noClip = FALSE,
  pathOptions = leaflet::pathOptions(),
  highlightOptions = NULL
)

addGPX(
  map,
  gpx,
  layerId = NULL,
  group = NULL,
  markerType = NULL,
  markerIcons = NULL,
  markerIconProperty = NULL,
  markerOptions = leaflet::markerOptions(),
  clusterOptions = NULL,
  clusterId = NULL,
  labelProperty = NULL,
  labelOptions = leaflet::labelOptions(),
  popupProperty = NULL,
  popupOptions = leaflet::popupOptions(),
  stroke = TRUE,
  color = "#03F",
  weight = 5,
  opacity = 0.5,
  fill = TRUE,
  fillColor = color,
  fillOpacity = 0.2,
  dashArray = NULL,
  smoothFactor = 1,
  noClip = FALSE,
  pathOptions = leaflet::pathOptions(),
  highlightOptions = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>a map widget object created from <code>leaflet()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geojson</code></td>
<td>
<p>a GeoJSON/TopoJSON URL or file contents in a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layerId</code></td>
<td>
<p>the layer id</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>the name of the group the newly created layers should belong to
(for <code>clearGroup</code> and <code>addLayersControl</code> purposes).
Human-friendly group names are permittedâ€“they need not be short,
identifier-style names. Any number of layers and even different types of
layers (e.g. markers and polygons) can share the same group name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>markerType</code></td>
<td>
<p>The type of marker. Either <code>marker</code> or <code>circleMarker</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>markerIcons</code></td>
<td>
<p>Icons for Marker.
Can be a single marker using <code>makeIcon</code>
or a list of markers using <code>iconList</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>markerIconProperty</code></td>
<td>
<p>The property of the feature to use for marker icon.
Can be a JS function which accepts a feature and returns an index of <code>markerIcons</code>.
In either case the result must be one of the indexes of markerIcons.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>markerOptions</code></td>
<td>
<p>The options for markers</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clusterOptions</code></td>
<td>
<p>if not <code>NULL</code>, markers will be clustered using
<a href="https://github.com/Leaflet/Leaflet.markercluster">Leaflet.markercluster</a>;
you can use <code>markerClusterOptions()</code> to specify marker cluster
options</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clusterId</code></td>
<td>
<p>the id for the marker cluster layer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labelProperty</code></td>
<td>
<p>The property to use for the label.
You can also pass in a JS function that takes in a feature and returns a text/HTML content.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labelOptions</code></td>
<td>
<p>A Vector of <code>labelOptions</code> to provide label
options for each label. Default <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>popupProperty</code></td>
<td>
<p>The property to use for popup content
You can also pass in a JS function that takes in a feature and returns a text/HTML content.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>popupOptions</code></td>
<td>
<p>A Vector of <code>popupOptions</code> to provide popups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stroke</code></td>
<td>
<p>whether to draw stroke along the path (e.g. the borders of
polygons or circles)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p>stroke color</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>stroke width in pixels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opacity</code></td>
<td>
<p>stroke opacity (or layer opacity for tile layers)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>whether to fill the path with color (e.g. filling on polygons or
circles)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fillColor</code></td>
<td>
<p>fill color</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fillOpacity</code></td>
<td>
<p>fill opacity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dashArray</code></td>
<td>
<p>a string that defines the stroke
<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray">dash
pattern</a></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoothFactor</code></td>
<td>
<p>how much to simplify the polyline on each zoom level
(more means better performance and less accurate representation)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noClip</code></td>
<td>
<p>whether to disable polyline clipping</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pathOptions</code></td>
<td>
<p>Options for shapes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>highlightOptions</code></td>
<td>
<p>Options for highlighting the shape on mouse over.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>An optional title for the legend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>position</code></td>
<td>
<p>legend position</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locale</code></td>
<td>
<p>The numbers will be formatted using this locale</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numberFormatOptions</code></td>
<td>
<p>Options for formatting numbers</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>valueProperty</code></td>
<td>
<p>The property to use for coloring</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>The scale to use from chroma.js</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>steps</code></td>
<td>
<p>number of breakes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>q for quantile, e for equidistant, k for k-means</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>channelMode</code></td>
<td>
<p>Default "rgb", can be one of "rgb", "lab", "hsl", "lch"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>padding</code></td>
<td>
<p>either a single number or a 2 number vector for clipping color values at ends.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correctLightness</code></td>
<td>
<p>whether to correct lightness</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bezierInterpolate</code></td>
<td>
<p>whether to use bezier interpolate for determining colors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colors</code></td>
<td>
<p>overrides scale with manual colors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendOptions</code></td>
<td>
<p>Options to show a legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kml</code></td>
<td>
<p>a KML URL or contents in a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latfield</code></td>
<td>
<p>field name for latitude</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lonfield</code></td>
<td>
<p>field name for longitude</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delimiter</code></td>
<td>
<p>field separator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>csv</code></td>
<td>
<p>a CSV URL or contents in a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>csvParserOptions</code></td>
<td>
<p>options for parsing the CSV.
Use <code>csvParserOptions</code>() to supply csv parser options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gpx</code></td>
<td>
<p>a GPX URL or contents in a character vector.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">## addGeoJSONv2

geoJson &lt;- readr::read_file(
  "https://rawgit.com/benbalter/dc-maps/master/maps/historic-landmarks-points.geojson"
)

leaflet() %&gt;%
  setView(-77.0369, 38.9072, 12) %&gt;%
  addProviderTiles(providers$CartoDB.Positron) %&gt;%
  addWebGLGeoJSONHeatmap(
    geoJson,
    size = 30, units = "px"
  ) %&gt;%
  addGeoJSONv2(
    geoJson,
    markerType = "circleMarker",
    stroke = FALSE, fillColor = "black", fillOpacity = 0.7,
    markerOptions = markerOptions(radius = 2)
  )


## for more examples see
# browseURL(system.file("examples/draw.R", package = "leaflet.extras"))
# browseURL(system.file("examples/geojsonv2.R", package = "leaflet.extras"))
# browseURL(system.file("examples/search.R", package = "leaflet.extras"))
# browseURL(system.file("examples/TopoJSON.R", package = "leaflet.extras"))

## addGeoJSONChoropleth

geoJson &lt;- readr::read_file(
  "https://rawgit.com/benbalter/dc-maps/master/maps/ward-2012.geojson"
)

leaflet() %&gt;%
  addTiles() %&gt;%
  setView(-77.0369, 38.9072, 11) %&gt;%
  addBootstrapDependency() %&gt;%
  enableMeasurePath() %&gt;%
  addGeoJSONChoropleth(
    geoJson,
    valueProperty = "AREASQMI",
    scale = c("white", "red"),
    mode = "q",
    steps = 4,
    padding = c(0.2, 0),
    labelProperty = "NAME",
    popupProperty = propstoHTMLTable(
      props = c("NAME", "AREASQMI", "REP_NAME", "WEB_URL", "REP_PHONE", "REP_EMAIL", "REP_OFFICE"),
      table.attrs = list(class = "table table-striped table-bordered"),
      drop.na = TRUE
    ),
    color = "#ffffff", weight = 1, fillOpacity = 0.7,
    highlightOptions = highlightOptions(
      weight = 2, color = "#000000",
      fillOpacity = 1, opacity = 1,
      bringToFront = TRUE, sendToBack = TRUE
    ),
    pathOptions = pathOptions(
      showMeasurements = TRUE,
      measurementOptions = measurePathOptions(imperial = TRUE)
    )
  )


## for more examples see
# browseURL(system.file("examples/geojsonv2.R", package = "leaflet.extras"))
# browseURL(system.file("examples/measurePath.R", package = "leaflet.extras"))
# browseURL(system.file("examples/search.R", package = "leaflet.extras"))
# browseURL(system.file("examples/TopoJSON.R", package = "leaflet.extras"))

## addKML

kml &lt;- readr::read_file(
  system.file("examples/data/kml/crimes.kml.zip", package = "leaflet.extras")
)

leaflet() %&gt;%
  setView(-77.0369, 38.9072, 12) %&gt;%
  addProviderTiles(providers$CartoDB.Positron) %&gt;%
  addWebGLKMLHeatmap(kml, size = 20, units = "px") %&gt;%
  addKML(
    kml,
    markerType = "circleMarker",
    stroke = FALSE, fillColor = "black", fillOpacity = 1,
    markerOptions = markerOptions(radius = 1)
  )


## addKMLChoropleth

kml &lt;- readr::read_file(
  system.file("examples/data/kml/cb_2015_us_state_20m.kml.zip", package = "leaflet.extras")
)

leaflet() %&gt;%
  addBootstrapDependency() %&gt;%
  setView(-98.583333, 39.833333, 4) %&gt;%
  addProviderTiles(providers$CartoDB.Positron) %&gt;%
  addKMLChoropleth(
    kml,
    valueProperty = JS(
      "function(feature){
         var props = feature.properties;
         var aland = props.ALAND/100000;
         var awater = props.AWATER/100000;
         return 100*awater/(awater+aland);
      }"
    ),
    scale = "OrRd", mode = "q", steps = 5,
    padding = c(0.2, 0),
    popupProperty = "description",
    labelProperty = "NAME",
    color = "#ffffff", weight = 1, fillOpacity = 1,
    highlightOptions = highlightOptions(
      fillOpacity = 1, weight = 2, opacity = 1, color = "#000000",
      bringToFront = TRUE, sendToBack = TRUE
    ),
    legendOptions = legendOptions(
      title = "% of Water Area",
      numberFormatOptions = list(
        style = "decimal",
        maximumFractionDigits = 2
      )
    )
  )


## addCSV

csv &lt;- readr::read_file(
  system.file("examples/data/csv/world_airports.csv.zip", package = "leaflet.extras")
)

leaflet() %&gt;%
  setView(0, 0, 2) %&gt;%
  addProviderTiles(providers$CartoDB.DarkMatterNoLabels) %&gt;%
  addCSV(
    csv,
    csvParserOptions("latitude_deg", "longitude_deg"),
    markerType = "circleMarker",
    stroke = FALSE, fillColor = "red", fillOpacity = 1,
    markerOptions = markerOptions(radius = 0.5)
  )


## addGPX

airports &lt;- readr::read_file(
  system.file("examples/data/gpx/md-airports.gpx.zip", package = "leaflet.extras")
)

leaflet() %&gt;%
  addBootstrapDependency() %&gt;%
  setView(-76.6413, 39.0458, 8) %&gt;%
  addProviderTiles(
    providers$CartoDB.Positron,
    options = providerTileOptions(detectRetina = TRUE)
  ) %&gt;%
  addWebGLGPXHeatmap(airports, size = 20000, group = "airports", opacity = 0.9) %&gt;%
  addGPX(
    airports,
    markerType = "circleMarker",
    stroke = FALSE, fillColor = "black", fillOpacity = 1,
    markerOptions = markerOptions(radius = 1.5),
    group = "airports"
  )


## for a larger example see
# browseURL(system.file("examples/GPX.R", package = "leaflet.extras"))

</code></pre>


</div>