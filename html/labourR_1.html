<div class="container">

<table style="width: 100%;"><tr>
<td>classify_occupation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Classify occupations</h2>

<h3>Description</h3>

<p>This function takes advantage of the hierarchical structure of the ESCO-ISCO mapping and matches multilingual free-text with the
<a href="https://ec.europa.eu/esco/portal/home">ESCO</a> occupations vocabulary in order to map semi-structured vacancy data into the official
ESCO-ISCO classification.
</p>


<h3>Usage</h3>

<pre><code class="language-R">classify_occupation(
  corpus,
  id_col = "id",
  text_col = "text",
  lang = "en",
  num_leaves = 10,
  isco_level = 3,
  max_dist = 0.1,
  string_dist = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>corpus</code></td>
<td>
<p>A data.frame or a data.table that contains the id and the text variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_col</code></td>
<td>
<p>The name of the id variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_col</code></td>
<td>
<p>The name of the text variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lang</code></td>
<td>
<p>The language that the text is in.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_leaves</code></td>
<td>
<p>The number of occupations/neighbors that are kept when matching.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isco_level</code></td>
<td>
<p>The <a href="https://ec.europa.eu/esco/portal/escopedia/Occupation">ISCO</a> level of the suggested occupations.
Can be either 1, 2, 3, 4 for ISCO occupations, or NULL that returns ESCO occupations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_dist</code></td>
<td>
<p>String distance used for fuzzy matching. The <code>amatch</code> function from the stringdist package is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>string_dist</code></td>
<td>
<p>String dissimilarity measurement. Available string distance metrics: <code>stringdist-metrics</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>First, the input text is cleansed and tokenized. The tokens are then matched with the ESCO occupations vocabulary, created from
the preferred and alternative labels of the occupations. They are joined with the <code>tfidf</code>
weighted tokens of the ESCO occupations and the sum of the tf-idf score is used to retrieve the suggested ontologies. Technically speaking, the
suggested ESCO occupations are retrieved by solving the optimization problem, </p>
<p style="text-align: center;"><code class="reqn">\arg\max_d\left\{\vec{u}_{binary}\cdot \vec{u}_d\right\}</code>
</p>

<p>where, <code class="reqn">\vec{u}_{binary}</code> stands for the binary representation of a query to the ESCO-vocabulary space,
while, <code class="reqn">\vec{u}_d</code> is the ESCO occupation normalized vector generated by the tf-idf numerical statistic.
If an ISCO level is specified, the k-nearest neighbors algorithm is used to determine the suggested occupation, classified by a plurality vote in the corresponding hierarchical level of its neighbors.
</p>
<p>Before the suggestions are returned, the preferred label of each suggested occupation is added to the result, using the
<code>occupations_bundle</code> and <code>isco_occupations_bundle</code> as look-up tables.
</p>


<h3>Value</h3>

<p>Either a data.table with the id, the preferred label and the suggested ESCO occupation URIs (num_leaves predictions for each id),
or a data.table with the id, the preferred label and the suggested ISCO group of the inputted level (one for each id).
</p>


<h3>References</h3>

<p>M.P.J. van der Loo (2014). <a href="https://journal.r-project.org/archive/2014-1/loo.pdf">The stringdist package for approximate string matching</a>. R Journal 6(1) pp 111-122.
</p>
<p>Gweon, H., Schonlau, M., Kaczmirek, L., Blohm, M., &amp; Steiner, S. (2017). <a href="https://doi.org/10.1515/jos-2017-0006">Three Methods for Occupation Coding Based on Statistical Learning, Journal of Official Statistics</a>, 33(1), 101-122.
</p>
<p>Arthur Turrell, Bradley J. Speigner, Jyldyz Djumalieva, David Copple, James Thurgood (2019).
<a href="https://www.nber.org/papers/w25837">Transforming Naturally Occurring Text Data Into Economic Statistics:
The Case of Online Job Vacancy Postings</a>.
</p>
<p>ESCO Service Platform - <a href="https://ec.europa.eu/esco/portal/document/en/87a9f66a-1830-4c93-94f0-5daa5e00507e">
The ESCO Data Model documentation</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">corpus &lt;- data.frame(
 id = 1:3,
 text = c(
   "Junior Architect Engineer",
   "Cashier at McDonald's",
   "Priest at St. Martin Catholic Church"
 )
)
classify_occupation(corpus = corpus, isco_level = 3, lang = "en", num_leaves = 5)

</code></pre>


</div>