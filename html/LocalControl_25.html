<div class="container">

<table style="width: 100%;"><tr>
<td>UPSivadj</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Instrumental Variable LATE Linear Fitting in Unsupervised Propensiy Scoring</h2>

<h3>Description</h3>

<p>For a given number of patient clusters in baseline X-covariate space and a
specified Y-outcome variable, linearly smooth the distribution of Local Average
Treatment Effects (LATEs) plotted versus Within-Cluster Treatment Selection (PS)
Percentages.
</p>


<h3>Usage</h3>

<pre><code class="language-R">UPSivadj(envir, numclust)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>name of the working local control classic environment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numclust</code></td>
<td>
<p>Number of clusters in baseline X-covariate space.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Multiple calls to UPSivadj(n) for varying numbers of clusters n are made after first
invoking UPShclus() to hierarchically cluster patients in X-space and then invoking UPSaccum()
to specify a Y outcome variable and a two-level treatment factor t.  UPSivadj(n) linearly
smoothes the LATE distribution when plotted versus within cluster propensity score percentages.
</p>


<h3>Value</h3>

<p>An output list object of class UPSivadj:
</p>

<dl>
<dt>hiclus</dt>
<dd>
<p>Name of clustering object created by UPShclus().</p>
</dd>
<dt>dframe</dt>
<dd>
<p>Name of data.frame containing X, t &amp; Y variables.</p>
</dd>
<dt>trtm</dt>
<dd>
<p>Name of treatment factor variable.</p>
</dd>
<dt>yvar</dt>
<dd>
<p>Name of outcome Y variable.</p>
</dd>
<dt>numclust</dt>
<dd>
<p>Number of clusters requested.</p>
</dd>
<dt>actclust</dt>
<dd>
<p>Number of clusters actually produced.</p>
</dd>
<dt>scedas</dt>
<dd>
<p>Scedasticity assumption: "homo" or "hete"</p>
</dd>
<dt>PStdif</dt>
<dd>
<p>Character string describing the treatment difference.</p>
</dd>
<dt>ivhbindf</dt>
<dd>
<p>Vector containing cluster number for each patient. </p>
</dd>
<dt>rawmean</dt>
<dd>
<p>Unadjusted outcome mean by treatment group.</p>
</dd>
<dt>rawvars</dt>
<dd>
<p>Unadjusted outcome variance by treatment group.</p>
</dd>
<dt>rawfreq</dt>
<dd>
<p>Number of patients by treatment group.</p>
</dd>
<dt>ratdif</dt>
<dd>
<p>Unadjusted mean outcome difference between treatments.</p>
</dd>
<dt>ratsde</dt>
<dd>
<p>Standard error of unadjusted mean treatment difference.</p>
</dd>
<dt>binmean</dt>
<dd>
<p>Unadjusted mean outcome by cluster and treatment.</p>
</dd>
<dt>binfreq</dt>
<dd>
<p>Number of patients by bin and treatment.</p>
</dd>
<dt>faclev</dt>
<dd>
<p>Maximum number of different numerical values an outcome variable can assume without
automatically being converted into a "factor" variable; faclev=1 causes a binary indicator to be
treated as a continuous variable determining an average or proportion.</p>
</dd>
<dt>youtype</dt>
<dd>
<p>"contin"uous =&gt; next eleven outputs; "factor" =&gt; no additional output items.</p>
</dd>
<dt>pbinout</dt>
<dd>
<p>LATE regardless of treatment by cluster.</p>
</dd>
<dt>pbinpsp</dt>
<dd>
<p>Within-Cluster Treatment Percentage = non-parametric Propensity Score.</p>
</dd>
<dt>pbinsiz</dt>
<dd>
<p>Cluster radii measure: square root of total number of patients.</p>
</dd>
<dt>symsiz</dt>
<dd>
<p>Symbol size of largest possible Snowball in a UPSivadj() plot with 1 cluster.</p>
</dd>
<dt>ivfit</dt>
<dd>
<p>lm() output for linear smooth across clusters.</p>
</dd>
<dt>ivtzero</dt>
<dd>
<p>Predicted outcome at PS percentage zero.</p>
</dd>
<dt>ivtxsde</dt>
<dd>
<p>Standard deviation of outcome prediction at PS percentage zero.</p>
</dd>
<dt>ivtdiff</dt>
<dd>
<p>Predicted outcome difference for PS percentage 100 minus that at zero.</p>
</dd>
<dt>ivtdsde</dt>
<dd>
<p>Standard deviation of outcome difference.</p>
</dd>
<dt>ivt100p</dt>
<dd>
<p>Predicted outcome at PS percentage 100.</p>
</dd>
<dt>ivt1pse</dt>
<dd>
<p>Standard deviation of outcome prediction at PS percentage 100.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Bob Obenchain &lt;wizbob@att.net&gt;
</p>


<h3>References</h3>


<ul>
<li>
<p> Imbens GW, Angrist JD. (1994) Identification and Estimation  of
Local Average Treatment Effects (LATEs). <em>Econometrica</em> <b>62</b>: 467-475.
</p>
</li>
<li>
<p> Obenchain RL. (2004) Unsupervised Propensity Scoring: NN and IV Plots.
<em>Proceedings of the American Statistical Association (on CD)</em> 8 pages.
</p>
</li>
<li>
<p> Obenchain RL. (2011) <b>USPSinR.pdf</b>  USPS R-package vignette, 40 pages.-
</p>
</li>
<li>
<p> McClellan M, McNeil BJ, Newhouse JP. (1994) Does More Intensive Treatment of
Myocardial Infarction in the Elderly Reduce Mortality?: Analysis Using Instrumental
Variables. <em>JAMA</em> <b>272</b>: 859-866.
</p>
</li>
<li>
<p> Rosenbaum PR, Rubin RB. (1983) The Central Role of the Propensity Score
in Observational Studies for Causal Effects. <em>Biometrika</em> <b>70</b>: 41-55.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>UPSnnltd</code>, <code>UPSaccum</code> and <code>UPSgraph</code>.
</p>


</div>