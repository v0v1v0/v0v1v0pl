<div class="container">

<table style="width: 100%;"><tr>
<td>community_plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate Community Composition Plot Based on Tax_summary Object</h2>

<h3>Description</h3>

<p>Microbial community composition visualization in format of barplot, areaplot and alluvialplot
</p>


<h3>Usage</h3>

<pre><code class="language-R">community_plot(
  taxobj,
  taxlevel,
  n = 10,
  palette = "Spectral",
  nrow = NULL,
  rmprefix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>taxobj</code></td>
<td>
<p>Configured tax summary objects.See in <code>object_config</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>taxlevel</code></td>
<td>
<p>Character. taxonomy levels used for visualization.Must be one of c("Domain","Phylum","Class","Order","Family","Genus","Species","Base").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Numeric. Top n taxa remained according to relative abundance. Default:10</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>palette</code></td>
<td>
<p>Character. Palette for visualization,default:"Spectral",recommended to use "Paired" for more than 15 tax.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrow</code></td>
<td>
<p>Numeric. Number of rows when wrap panels,default:NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmprefix</code></td>
<td>
<p>Numeric. Removed prefix character in taxonomy annotation.Default:NULL. See details in example.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>community_plot2 returns three ggplot objects, two data frame used in visualization and one character of filled mapping colors
</p>


<h3>Author(s)</h3>

<p>Wang Ningqi<a href="mailto:2434066068@qq.com">2434066068@qq.com</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">{
  require(magrittr)
  ### Data preparation ###
  data("Two_group")

  ## Use taxonomy summary objects
  phylum10 &lt;- community_plot(
    taxobj = Two_group,
    taxlevel = "Phylum",
    n = 10,
    rmprefix = "p__"
  )

  phylum10$barplot  # Check bar plot
  phylum10$areaplot  # Check area plot
  phylum10$alluvialplot  # Check alluvial plot

  phylum10$Top10Phylum %&gt;% head(10)  # Check top taxa data frame
  phylum10$Grouped_Top10Phylum %&gt;% head(10)  # Check grouped top taxa data frame
  print(phylum10$filled_color)  # Check mapping colors

  # Double facet
  data("Facet_group")

  # Using palette by default
  phylum10 &lt;- community_plot(
    taxobj = Facet_group,
    taxlevel = "Phylum",
    n = 10,
    rmprefix = " p__"
  )
  phylum10$barplot
  phylum10$areaplot
  phylum10$alluvialplot

  # Another example
  genus20 &lt;- community_plot(
    taxobj = Facet_group,
    taxlevel = "Genus",
    n = 20,
    palette = "Paired",
    rmprefix = " g__"
  )
  genus20$alluvialplot
}
</code></pre>


</div>