<div class="container">

<table style="width: 100%;"><tr>
<td>UPSnnltd</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Nearest Neighbor Distribution of LTDs in Unsupervised Propensiy Scoring</h2>

<h3>Description</h3>

<p>For a given number of patient clusters in baseline X-covariate space, UPSnnltd()
characterizes the distribution of Nearest Neighbor "Local Treatemnt Differences" (LTDs) on
a specified Y-outcome variable.
</p>


<h3>Usage</h3>

<pre><code class="language-R">UPSnnltd(envir, numclust)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>name of the working local control classic environment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numclust</code></td>
<td>
<p>Number of clusters in baseline X-covariate space.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Multiple calls to UPSnnltd(n) for varying numbers of clusters, n, are typically made
after first invoking UPShclus() to hierarchically cluster patients in X-space and then
invoking UPSaccum() to specify a Y outcome variable and a two-level treatment factor t.
UPSnnltd(n) then determines the LTD Distribution corresponding to n clusters and,
optionally, displays this distribution in a "Snowball" plot.
</p>


<h3>Value</h3>

<p>An output list object of class UPSnnltd:
</p>

<dl>
<dt>hiclus</dt>
<dd>
<p>Name of clustering object created by UPShclus().</p>
</dd>
<dt>dframe</dt>
<dd>
<p>Name of data.frame containing X, t &amp; Y variables.</p>
</dd>
<dt>trtm</dt>
<dd>
<p>Name of treatment factor variable.</p>
</dd>
<dt>yvar</dt>
<dd>
<p>Name of outcome Y variable.</p>
</dd>
<dt>numclust</dt>
<dd>
<p>Number of clusters requested.</p>
</dd>
<dt>actclust</dt>
<dd>
<p>Number of clusters actually produced.</p>
</dd>
<dt>scedas</dt>
<dd>
<p>Scedasticity assumption: "homo" or "hete"</p>
</dd>
<dt>PStdif</dt>
<dd>
<p>Character string describing the treatment difference.</p>
</dd>
<dt>nnhbindf</dt>
<dd>
<p>Vector containing cluster number for each patient. </p>
</dd>
<dt>rawmean</dt>
<dd>
<p>Unadjusted outcome mean by treatment group.</p>
</dd>
<dt>rawvars</dt>
<dd>
<p>Unadjusted outcome variance by treatment group.</p>
</dd>
<dt>rawfreq</dt>
<dd>
<p>Number of patients by treatment group.</p>
</dd>
<dt>ratdif</dt>
<dd>
<p>Unadjusted mean outcome difference between treatments.</p>
</dd>
<dt>ratsde</dt>
<dd>
<p>Standard error of unadjusted mean treatment difference.</p>
</dd>
<dt>binmean</dt>
<dd>
<p>Unadjusted mean outcome by cluster and treatment.</p>
</dd>
<dt>binvars</dt>
<dd>
<p>Unadjusted variance by cluster and treatment.</p>
</dd>
<dt>binfreq</dt>
<dd>
<p>Number of patients by bin and treatment.</p>
</dd>
<dt>awbdif</dt>
<dd>
<p>Across cluster average difference with cluster size weights.</p>
</dd>
<dt>awbsde</dt>
<dd>
<p>Standard error of awbdif.</p>
</dd>
<dt>wwbdif</dt>
<dd>
<p>Across cluster average difference, inverse variance weights.</p>
</dd>
<dt>wwbsde</dt>
<dd>
<p>Standard error of wwbdif.</p>
</dd>
<dt>faclev</dt>
<dd>
<p>Maximum number of different numerical values an outcome variable can assume without
automatically being converted into a "factor" variable; faclev=1 causes a binary indicator to be
treated as a continuous variable determining an average or proportion.</p>
</dd>
<dt>youtype</dt>
<dd>
<p>"contin"uous =&gt; only next eight outputs; "factor" =&gt; only last three outputs.</p>
</dd>
<dt>aovdiff</dt>
<dd>
<p>ANOVA summary for treatment main effect only.</p>
</dd>
<dt>form2</dt>
<dd>
<p>Formula for outcome differences due to bins and to treatment nested within bins.</p>
</dd>
<dt>bindiff</dt>
<dd>
<p>ANOVA summary for treatment nested within cluster.</p>
</dd>
<dt>sig2</dt>
<dd>
<p>Estimate of error mean square in nested model.</p>
</dd>
<dt>pbindif</dt>
<dd>
<p>Unadjusted treatment difference by cluster.</p>
</dd>
<dt>pbinsde</dt>
<dd>
<p>Standard error of the unadjusted difference by cluster.</p>
</dd>
<dt>pbinsiz</dt>
<dd>
<p>Cluster radii measure: square root of total number of patients.</p>
</dd>
<dt>symsiz</dt>
<dd>
<p>Symbol size of largest possible Snowball in a UPSnnltd() plot with 1 cluster.</p>
</dd>
<dt>factab</dt>
<dd>
<p>Marginal table of counts by Y-factor level and treatment.</p>
</dd>
<dt>cumchi</dt>
<dd>
<p>Cumulative Chi-Square statistic for interaction in the three-way, nested table.</p>
</dd>
<dt>cumdf</dt>
<dd>
<p>Degrees of-Freedom for the Cumulative Chi-Squared.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Bob Obenchain &lt;wizbob@att.net&gt;
</p>


<h3>References</h3>


<ul>
<li>
<p> Obenchain RL. (2004) Unsupervised Propensity Scoring: NN and IV Plots.
<em>Proceedings of the American Statistical Association (on CD)</em> 8 pages.
</p>
</li>
<li>
<p> Obenchain RL. (2011) <b>USPSinR.pdf</b>  USPS R-package vignette, 40 pages.
</p>
</li>
<li>
<p> Rosenbaum PR, Rubin RB. (1983) The Central Role of the Propensity Score
in Observational Studies for Causal Effects. <em>Biometrika</em> <b>70</b>:
41â€“55.
</p>
</li>
<li>
<p> Rubin DB. (1980) Bias reduction using Mahalanobis metric matching.
<em>Biometrics</em> <b>36</b>: 293-298.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>UPSivadj</code>, <code>UPSaccum</code> and <code>UPSgraph</code>.
</p>


</div>