<div class="container">

<table style="width: 100%;"><tr>
<td>LayoutJson</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Format LogEvents as JSON</h2>

<h3>Description</h3>

<p>A format for formatting LogEvents as
<a href="https://jsonlines.org/">jsonlines</a> log files. This provides a
nice balance between human- an machine-readability.
</p>


<h3>Super class</h3>

<p><code>lgr::Layout</code> -&gt; <code>LayoutJson</code>
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>toJSON_args</code></dt>
<dd>
<p>a list of values passed on to <code>jsonlite::toJSON()</code></p>
</dd>
<dt><code>timestamp_fmt</code></dt>
<dd>
<p>Used by  <code style="white-space: pre;">⁠$format_event()⁠</code> to format timestamps.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LayoutJson-new"><code>LayoutJson$new()</code></a>
</p>
</li>
<li> <p><a href="#method-LayoutJson-format_event"><code>LayoutJson$format_event()</code></a>
</p>
</li>
<li> <p><a href="#method-LayoutJson-set_toJSON_args"><code>LayoutJson$set_toJSON_args()</code></a>
</p>
</li>
<li> <p><a href="#method-LayoutJson-set_timestamp_fmt"><code>LayoutJson$set_timestamp_fmt()</code></a>
</p>
</li>
<li> <p><a href="#method-LayoutJson-toString"><code>LayoutJson$toString()</code></a>
</p>
</li>
<li> <p><a href="#method-LayoutJson-parse"><code>LayoutJson$parse()</code></a>
</p>
</li>
<li> <p><a href="#method-LayoutJson-read"><code>LayoutJson$read()</code></a>
</p>
</li>
<li> <p><a href="#method-LayoutJson-clone"><code>LayoutJson$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-LayoutJson-new"></a>



<h4>Method <code>new()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>LayoutJson$new(toJSON_args = list(auto_unbox = TRUE), timestamp_fmt = NULL)</pre></div>


<hr>
<a id="method-LayoutJson-format_event"></a>



<h4>Method <code>format_event()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>LayoutJson$format_event(event)</pre></div>


<hr>
<a id="method-LayoutJson-set_toJSON_args"></a>



<h4>Method <code>set_toJSON_args()</code>
</h4>

<p>Set arguments to pass on to <code>jsonlite::toJSON()</code>
</p>


<h5>Usage</h5>

<div class="r"><pre>LayoutJson$set_toJSON_args(x)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt>
<dd>
<p>a named <code>list</code></p>
</dd>
</dl>
</div>


<hr>
<a id="method-LayoutJson-set_timestamp_fmt"></a>



<h4>Method <code>set_timestamp_fmt()</code>
</h4>

<p>Set a format that this Layout will apply to timestamps.
</p>


<h5>Usage</h5>

<div class="r"><pre>LayoutJson$set_timestamp_fmt(x)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt>
<dd>
<ul>
<li> <p><code>NULL</code> (the default): formatting of the timestamp is left to
<code>jsonlite::toJSON()</code>,
</p>
</li>
<li>
<p> a <code>character</code> scalar as for <code>format.POSIXct()</code>, or
</p>
</li>
<li>
<p> a <code>function</code> that returns a vector of the same length as its
(POSIXct) input. The returned vector can be of any type
supported by <code>jsonlite::toJSON()</code>, but should usually be <code>character</code>.
</p>
</li>
</ul>
</dd>
</dl>
</div>


<hr>
<a id="method-LayoutJson-toString"></a>



<h4>Method <code>toString()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>LayoutJson$toString()</pre></div>


<hr>
<a id="method-LayoutJson-parse"></a>



<h4>Method <code>parse()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>LayoutJson$parse(file)</pre></div>


<hr>
<a id="method-LayoutJson-read"></a>



<h4>Method <code>read()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>LayoutJson$read(file, threshold = NA_integer_, n = 20L)</pre></div>


<hr>
<a id="method-LayoutJson-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LayoutJson$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>See Also</h3>

<p><code>read_json_lines()</code>, <a href="https://jsonlines.org/">https://jsonlines.org/</a>
</p>
<p>Other Layouts: 
<code>LayoutFormat</code>,
<code>LayoutGlue</code>,
<code>Layout</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># setup a dummy LogEvent
event &lt;- LogEvent$new(
  logger = Logger$new("dummy logger"),
  level = 200,
  timestamp = Sys.time(),
  caller = NA_character_,
  msg = "a test message",
  custom_field = "LayoutJson can handle arbitrary fields"
)

# Default settings show all event fals
lo &lt;- LayoutJson$new()
lo$format_event(event)
</code></pre>


</div>