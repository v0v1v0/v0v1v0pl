<div class="container">

<table style="width: 100%;"><tr>
<td>edit_lM</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Edit an MPM based on Supplemental Data</h2>

<h3>Description</h3>

<p>Function <code>edit_lM()</code> edits existing <code>lefkoMat</code> objects with
external data supplied by the user. The effects are similar to function
<code>supplemental()</code>, though function <code>edit_lM()</code> allows
individuals matrices within <code>lefkoMat</code> objects to be edited after
creation, while <code>supplemental()</code> provides external data that
modifies all matrices within a <code>lefkoMat</code> object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">edit_lM(
  mpm,
  pop = NULL,
  patch = NULL,
  year2 = NULL,
  stage3 = NULL,
  stage2 = NULL,
  stage1 = NULL,
  age2 = NULL,
  eststage3 = NULL,
  eststage2 = NULL,
  eststage1 = NULL,
  estage2 = NULL,
  givenrate = NULL,
  multiplier = NULL,
  type = NULL,
  type_t12 = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mpm</code></td>
<td>
<p>The <code>lefkoMat</code> object to be edited.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pop</code></td>
<td>
<p>A string vector denoting the populations to be edited. Defaults
to <code>NULL</code>, in which case all populations are edited.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>patch</code></td>
<td>
<p>A string vector denoting the patches to be edited. Defaults
to <code>NULL</code>, in which case all patches are edited.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year2</code></td>
<td>
<p>A string vector denoting the years to be edited. Defaults
to <code>NULL</code>, in which case all years are edited.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stage3</code></td>
<td>
<p>The name of the stage in occasion <em>t</em>+1 in the transition
to be replaced. Abbreviations for groups of stages are also usable (see
<code>Notes</code>). Required in all stage-based and age-by-stage MPMs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stage2</code></td>
<td>
<p>The name of the stage in occasion <em>t</em> in the transition
to be replaced. Abbreviations for groups of stages are also usable (see
<code>Notes</code>). Required in all stage-based and age-by-stage MPMs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stage1</code></td>
<td>
<p>The name of the stage in occasion <em>t</em>-1 in the transition
to be replaced. Only needed if a historical matrix is to be produced.
Abbreviations for groups of stages are also usable (see <code>Notes</code>).
Required for historical stage-based MPMs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age2</code></td>
<td>
<p>An integer vector of the ages in occasion <em>t</em> to use in
transitions to be changed or replaced. Required for all age- and
age-by-stage MPMs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eststage3</code></td>
<td>
<p>The name of the stage to replace <code>stage3</code> in a proxy
transition. Only needed if a transition will be replaced by another
estimated transition, and only in stage-based and age-by-stage MPMs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eststage2</code></td>
<td>
<p>The name of the stage to replace <code>stage2</code> in a proxy
transition. Only needed if a transition will be replaced by another
estimated transition, and only in stage-based and age-by-stage MPMs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eststage1</code></td>
<td>
<p>The name of the stage to replace <code>stage1</code> in a proxy
historical transition. Only needed if a transition will be replaced by
another estimated transition, and the matrix to be estimated is historical
and stage-based. Stage <code>NotAlive</code> is also possible for raw hMPMs as a
means of handling the prior stage for individuals entering the population in
occasion <em>t</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estage2</code></td>
<td>
<p>The age at time <em>t</em> to replace <code>age2</code> in a proxy
transition. Only needed if a transition will be replaced by another
estimated transition, and only in age-based and age-by-stage MPMs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>givenrate</code></td>
<td>
<p>A fixed rate or probability to replace for the transition
described by <code>stage3</code>, <code>stage2</code>, and <code>stage1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multiplier</code></td>
<td>
<p>A vector of numeric multipliers for fecundity or for proxy
transitions. Defaults to <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A vector denoting the kind of transition between occasions
<em>t</em> and <em>t</em>+1 to be replaced. This should be entered as <code>1</code>,
<code>S</code>, or <code>s</code> for the replacement of a survival transition;
<code>2</code>, <code>F</code>, or <code>f</code> for the replacement of a fecundity
transition; or <code>3</code>, <code>R</code>, or <code>r</code> for a fecundity multiplier.
If empty or not provided, then defaults to <code>1</code> for survival transition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type_t12</code></td>
<td>
<p>An optional vector denoting the kind of transition between
occasions <em>t</em>-1 and <em>t</em>. Only necessary if a historical MPM in
deVries format is desired. This should be entered as <code>1</code>, <code>S</code>, or
<code>s</code> for a survival transition; or <code>2</code>, <code>F</code>, or <code>f</code> for a
fecundity transitions. Defaults to <code>1</code> for survival transition, with
impacts only on the construction of deVries-format hMPMs.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An edited copy of the original MPM is returned, also as a
<code>lefkoMat</code> object.
</p>


<h3>Notes</h3>

<p>Entries in <code>stage3</code>, <code>stage2</code>, and <code>stage1</code> can include
abbreviations for groups of stages. Use <code>rep</code> if all reproductive
stages are to be used, <code>nrep</code> if all mature but non-reproductive stages
are to be used, <code>mat</code> if all mature stages are to be used, <code>immat</code>
if all immature stages are to be used, <code>prop</code> if all propagule stages
are to be used, <code>npr</code> if all non-propagule stages are to be used,
<code>obs</code> if all observable stages are to be used, <code>nobs</code> if all
unobservable stages are to be used, and leave empty or use <code>all</code> if all
stages in stageframe are to be used. Also use <code>groupX</code> to denote all
stages in group X (e.g. <code>group1</code> will use all stages in the respective
stageframe's group 1).
</p>


<h3>See Also</h3>

<p><code>supplemental()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(cypdata)

cypraw_v1 &lt;- verticalize3(data = cypdata, noyears = 6, firstyear = 2004,
  patchidcol = "patch", individcol = "plantid", blocksize = 4,
  sizeacol = "Inf2.04", sizebcol = "Inf.04", sizeccol = "Veg.04",
  repstracol = "Inf.04", repstrbcol = "Inf2.04", fecacol = "Pod.04",
  age_offset = 3, NAas0 = TRUE, NRasRep = TRUE)

cyp_rl &lt;- rleslie(data = cypraw_v1, start_age = 0, last_age = 6, continue = TRUE,
  fecage_min = 3, year = "all", pop = NA, patch = "all", yearcol = "year2",
  patchcol = "patchid", indivcol = "individ")

ddd1 &lt;- edit_lM(cyp_rl, age2 = c(0, 1, 2, 3, 4, 5, 6),
  givenrate = c(0.25, 0.25, 0.4, 0.4, NA, NA, NA),
  multiplier = c(NA, NA, NA, NA, 2000, 2000, 2000),
  type = c(1, 1, 1, 1, 3, 3, 3))
  
ddd1 &lt;- edit_lM(ddd1, age2 = 6, multiplier = 1.5, type = 3, patch = "B",
  year2 = "2005")

</code></pre>


</div>