<div class="container">

<table style="width: 100%;"><tr>
<td>InsuranceTarif</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Base class for traditional Insurance Tarifs (with fixed guarantee, profit
sharing and no unit-linked component)</h2>

<h3>Description</h3>

<p>The class <code>InsuranceTarif</code> provides the code and general
framework to implement contract-independent functionality of a life insurance
product.
</p>


<h3>Details</h3>

<p>This is a base class for holding contract-independent values and
providing methods to calculate cash flows, premiums, etc. Objects of this
class do NOT contain contract-specific values like age, death probabilities,
premiums, reserves, etc. Rather, they are the calculation kernels that will
be called by the <code>InsuranceContract</code> objects to make the actual,
tariff-specific calculations.
</p>
<p>Most methods of this class are not meant to be called manually, but are supposed
to be called by the InsuranceContract object with contract-specific information.
The only methods that are typically used for defining an insurance tariff are
the constructor <a href="#method-new"><code>InsuranceTarif$new()</code></a> and the cloning method
<a href="#method-createModification"><code>InsuranceTarif$createModification()</code></a>.
All other methods should never be called manually.
</p>
<p>However, as overriding private methods is not possible in an R6 class, all the
methods need to be public to allow overriding them in derived classes.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>name</code></dt>
<dd>
<p>The tariff's unique name. Will also be used as the key for exported data.</p>
</dd>
<dt><code>tarif</code></dt>
<dd>
<p>The tariff's public name (typically a product name), not necessarily unique.</p>
</dd>
<dt><code>desc</code></dt>
<dd>
<p>A short human-readable description of the tariff and its main features.</p>
</dd>
<dt><code>tariffType</code></dt>
<dd>
<p>An enum specifying the main characteristics of the tarif.
Possible values are:
</p>

<dl>
<dt>annuity</dt>
<dd>
<p>Whole life or term annuity (periodic survival benefits)
with flexible payouts (constand, increasing, decreasing, arbitrary,
etc.)</p>
</dd>
<dt>wholelife</dt>
<dd>
<p>A whole or term life insurance with only death benefits.
The benefit can be constant, increasing, decreasing, described by
a function, etc.</p>
</dd>
<dt>endowment</dt>
<dd>
<p>An  endowment with death and survival benefits,
potentially with different benefits.</p>
</dd>
<dt>pureendowment</dt>
<dd>
<p>A pure endowment with only a survival benefit at
the end of the contract. Optionally, in case of death, all or part
of the premiums paid may be refunded.</p>
</dd>
<dt>terme-fix</dt>
<dd>
<p>A terme-fix insurance with a fixed payout at the end
of the contract, even if the insured dies before that time.
Premiums are paid until death of the insured.</p>
</dd>
<dt>dread-disease</dt>
<dd>
<p>A dread-disease insurance, which pays in case of
a severe illness (typically heart attacks, cancer, strokes, etc.),
but not in case of death.</p>
</dd>
<dt>endowment + dread-disease</dt>
<dd>
<p>A combination of an endowment and a
temporary dread-disease insurance. Benefits occur either on death,
severe illness or survival, whichever comes first.</p>
</dd>
</dl>
</dd>
<dt><code>Parameters</code></dt>
<dd>
<p>A data structure (nested list) containing all relevant
parameters describing a contract, its underlying tariff, the profit
participation scheme etc. See InsuranceContract.ParameterStructure for
all fields.</p>
</dd>
<dt><code>dummy</code></dt>
<dd>
<p>Dummy field to allow commas after the previous method</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-InsuranceTarif-new"><code>InsuranceTarif$new()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-createModification"><code>InsuranceTarif$createModification()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getParameters"><code>InsuranceTarif$getParameters()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getInternalValues"><code>InsuranceTarif$getInternalValues()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getAges"><code>InsuranceTarif$getAges()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getTransitionProbabilities"><code>InsuranceTarif$getTransitionProbabilities()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getCostValues"><code>InsuranceTarif$getCostValues()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getPremiumCF"><code>InsuranceTarif$getPremiumCF()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getAnnuityCF"><code>InsuranceTarif$getAnnuityCF()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getDeathCF"><code>InsuranceTarif$getDeathCF()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getBasicCashFlows"><code>InsuranceTarif$getBasicCashFlows()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getCashFlows"><code>InsuranceTarif$getCashFlows()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getCashFlowsCosts"><code>InsuranceTarif$getCashFlowsCosts()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-presentValueCashFlows"><code>InsuranceTarif$presentValueCashFlows()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-presentValueCashFlowsCosts"><code>InsuranceTarif$presentValueCashFlowsCosts()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getAbsCashFlows"><code>InsuranceTarif$getAbsCashFlows()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getAbsPresentValues"><code>InsuranceTarif$getAbsPresentValues()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-presentValueBenefits"><code>InsuranceTarif$presentValueBenefits()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getPremiumCoefficients"><code>InsuranceTarif$getPremiumCoefficients()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-sumInsuredCalculation"><code>InsuranceTarif$sumInsuredCalculation()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-premiumCalculation"><code>InsuranceTarif$premiumCalculation()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-reserveCalculation"><code>InsuranceTarif$reserveCalculation()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getBalanceSheetReserveFactor"><code>InsuranceTarif$getBalanceSheetReserveFactor()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-reserveCalculationBalanceSheet"><code>InsuranceTarif$reserveCalculationBalanceSheet()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-calculateProfitParticipation"><code>InsuranceTarif$calculateProfitParticipation()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-reservesAfterProfit"><code>InsuranceTarif$reservesAfterProfit()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-getBasicDataTimeseries"><code>InsuranceTarif$getBasicDataTimeseries()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-premiumDecomposition"><code>InsuranceTarif$premiumDecomposition()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-calculateFutureSums"><code>InsuranceTarif$calculateFutureSums()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-calculatePresentValues"><code>InsuranceTarif$calculatePresentValues()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-evaluateFrequencyLoading"><code>InsuranceTarif$evaluateFrequencyLoading()</code></a>
</p>
</li>
<li> <p><a href="#method-InsuranceTarif-clone"><code>InsuranceTarif$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-InsuranceTarif-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Initialize a new tariff object
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$new(
  name = NULL,
  type = "wholelife",
  tarif = "Generic Tarif",
  desc = "Description of tarif",
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>The unique name / ID of the tariff</p>
</dd>
<dt><code>type</code></dt>
<dd>
<p>An enum specifying the main characteristics of the tarif. See TariffTypeEnum</p>
</dd>
<dt><code>tarif</code></dt>
<dd>
<p>The tariff's public name to be stored in the <code>tarif</code> field.</p>
</dd>
<dt><code>desc</code></dt>
<dd>
<p>A short human-readable description to be stored in the <code>desc</code> field.</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>Parameters for the InsuranceContract.ParameterStructure,
defining the characteristics of the tariff.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>The constructor function defines a tariff and generates the
corresponding data structure, which can then be used with the InsuranceContract
class to define an actual contract using the tariff.
</p>
<p>The arguments passed to this function will be stored inside the
<code>Parameters</code> field of the class, inside one of the lists sublists.
The parameters are stacked from different layers (higher levels override
default values from lower layers):
</p>

<ul>
<li>
<p> InsuranceContract object (parameters passed directly to the individual
contract)
</p>
</li>
<li>
<p> ProfitParticipation object (parameters for profit participation, passed
to the definition of the profit plan, which is used for the tarif
definition or the contract)
</p>
</li>
<li>
<p> InsuranceTarif object (parameters passed to the definition of the tariff
that was used for the contract)
</p>
</li>
<li>
<p> Defaults taken from InsuranceContract.ParameterStructure
</p>
</li>
</ul>
<p>The general implementation of this parameter layering means that (a) a tariff
can already provide default values for contracts (e.g. a default maturity,
default sum insured, etc) and (b) individual contracts can override all
parameters defined with the underlying tariff. In particular the latter
feature has many use-cases in prototyping: E.g. when you have a tariff
with a guaranteed interest rate of 1\
one can immediately instantiate a contract with an updated interest rate
or mortality table for comparison. There is no need to re-implement a
tariff for such comparisons, as long as only parameters are changed.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>MortalityTables::mortalityTables.load("Austria_Annuities_AVOe2005R")
tarif.male = InsuranceTarif$new(name = "Annuity Males", type = "annuity",
    i = 0.01, mortalityTable = AVOe2005R.male)
</pre>
</div>


<hr>
<a id="method-InsuranceTarif-createModification"></a>



<h4>Method <code>createModification()</code>
</h4>

<p>create a copy of a tariff with certain parameters changed
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$createModification(
  name = NULL,
  tarif = NULL,
  desc = NULL,
  tariffType = NULL,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>The unique name / ID of the tariff</p>
</dd>
<dt><code>tarif</code></dt>
<dd>
<p>The tariff's public name to be stored in the <code>tarif</code> field.</p>
</dd>
<dt><code>desc</code></dt>
<dd>
<p>A short human-readable description to be stored in the <code>desc</code> field.</p>
</dd>
<dt><code>tariffType</code></dt>
<dd>
<p>An enum specifying the main characteristics of the tarif.
See TariffTypeEnum</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>Parameters for the InsuranceContract.ParameterStructure,
defining the characteristics of the tariff.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>This method <code>createModification</code> returns a copy of the tariff
with all given arguments changed in the tariff's <code>InsuranceTarif$Parameters</code>
parameter list.
</p>
<p>As InsuranceTarif is a R6 class with reference logic, simply assigning
the object to a new variable does not create a copy, but references the
original tariff object. To create an actual copy, one needs to call this
method, which first clones the whole object and then adjusts all parameters
to the values passed to this method.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>MortalityTables::mortalityTables.load("Austria_Annuities_AVOe2005R")
tarif.male = InsuranceTarif$new(name = "Annuity Males", type = "annuity",
    i = 0.01, mortalityTable = AVOe2005R.male)
tarif.unisex = tarif.male$createModification(name = "Annuity unisex",
    mortalityTable = AVOe2005R.unisex)
</pre>
</div>


<hr>
<a id="method-InsuranceTarif-getParameters"></a>



<h4>Method <code>getParameters()</code>
</h4>

<p>Retrieve the parameters for this tariff (can be overridden
for each contract)
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getParameters()</pre></div>



<h5>Examples</h5>

<div class="r example copy">
<pre>tarif.male = InsuranceTarif$new(name = "Annuity Males", type = "annuity",
    i = 0.01, mortalityTable = AVOe2005R.male)
tarif.male$getParameters()
</pre>
</div>


<hr>
<a id="method-InsuranceTarif-getInternalValues"></a>



<h4>Method <code>getInternalValues()</code>
</h4>

<p>Get some internal parameters cached (length of data.frames,
policy periods cut at max.age, etc.)
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getInternalValues(params, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>currently unused</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>This methos is not meant to be called explicitly, but rather used
by the InsuranceContract class. It returns a list of maturities and ages
relevant for the contract-specific calculations
</p>


<hr>
<a id="method-InsuranceTarif-getAges"></a>



<h4>Method <code>getAges()</code>
</h4>

<p>Calculate the contract-relevant age(s) given a certain
parameter data structure (contract-specific values)
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getAges(params)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>This method is not meant to be called explicitly, but rather used
by the InsuranceContract class. It returns the relevant ages during the
whole contract period
</p>


<hr>
<a id="method-InsuranceTarif-getTransitionProbabilities"></a>



<h4>Method <code>getTransitionProbabilities()</code>
</h4>

<p>Calculate the transition probabilities from the contract-specific
parameters passed as <code>params</code> and the already-calculated contract
values <code>values</code>
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getTransitionProbabilities(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getCostValues"></a>



<h4>Method <code>getCostValues()</code>
</h4>

<p>Obtain the cost structure from the cost parameter and the
given paremeter set
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getCostValues(params)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>The parameters of the contract / tariff</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
The cost parameter can be either an array of costs (generated by <code>initializeCosts()</code>)
or a function with parameters <code>param</code> and <code>values</code>(=NULL) returning
an array of the required dimensions. This function makes sures that the
latter function is actually evaluated.
</p>


<hr>
<a id="method-InsuranceTarif-getPremiumCF"></a>



<h4>Method <code>getPremiumCF()</code>
</h4>

<p>Returns the unit premium cash flow for the whole contract period.
</p>

<ul>
<li>
<p> For constant premiums it will be rep(1, premiumPeriod),
</p>
</li>
<li>
<p> for single premiums it will be c(1, 0, 0, ...),
</p>
</li>
<li>
<p> for increasing premiums it will be (1+increase)^(0:(premiumPeriod-1))
and 0 after the premium period
</p>
</li>
</ul>
<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getPremiumCF(len, params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>len</code></dt>
<dd>
<p>The desired length of the returned data frame (the number of contract periods desire)</p>
</dd>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getAnnuityCF"></a>



<h4>Method <code>getAnnuityCF()</code>
</h4>

<p>Returns the unit annuity cash flow (guaranteed and contingent) for
the whole annuity payment period (after potential deferral period)
</p>

<ul>
<li>
<p> For constant annuity it will be rep(1, annuityPeriod),
</p>
</li>
<li>
<p> for increasing annuities it will be (1+increase)^(0:(premiumPeriod-1))
and 0 after the premium period
</p>
</li>
</ul>
<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getAnnuityCF(len, params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>len</code></dt>
<dd>
<p>The desired length of the returned data frame (the number of contract periods desire)</p>
</dd>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getDeathCF"></a>



<h4>Method <code>getDeathCF()</code>
</h4>

<p>Returns the unit death cash flow for the whole protection
period (after potential deferral period!)
</p>

<ul>
<li>
<p> For constant death benefit it will be rep(1, policyPeriod),
</p>
</li>
<li>
<p> for linearly decreasing sum insured it will be (policyPeriod:0)/policyPeriod
</p>
</li>
</ul>
<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getDeathCF(len, params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>len</code></dt>
<dd>
<p>The desired length of the returned data frame (the number of contract periods desire)</p>
</dd>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getBasicCashFlows"></a>



<h4>Method <code>getBasicCashFlows()</code>
</h4>

<p>Returns the basic (unit) cash flows associated with the type
of insurance given in the InsuranceTarif's <code>tariffType</code> field
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getBasicCashFlows(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getCashFlows"></a>



<h4>Method <code>getCashFlows()</code>
</h4>

<p>Returns the cash flows for the contract given the parameters
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getCashFlows(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getCashFlowsCosts"></a>



<h4>Method <code>getCashFlowsCosts()</code>
</h4>

<p>Returns the cost cash flows of the contract given the contract
and tariff parameters
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getCashFlowsCosts(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-presentValueCashFlows"></a>



<h4>Method <code>presentValueCashFlows()</code>
</h4>

<p>Returns the present values of the cash flows of the contract
(cash flows already calculated and stored in the <code>cashFlows</code> data.frame)
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$presentValueCashFlows(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
<dt><code>cashFlows</code></dt>
<dd>
<p>data.frame of cash flows calculated by a call to <a href="#method-getCashFlows"><code>InsuranceTarif$getCashFlows()</code></a></p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-presentValueCashFlowsCosts"></a>



<h4>Method <code>presentValueCashFlowsCosts()</code>
</h4>

<p>Calculates the present values of the cost cash flows of the
contract (cost cash flows alreay calculated by <a href="#method-getCashFlowsCosts"><code>InsuranceTarif$getCashFlowsCosts()</code></a>
and stored in the <code>values</code> list
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$presentValueCashFlowsCosts(params, values, presentValues)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
<dt><code>presentValues</code></dt>
<dd>
<p>The present values of the insurance claims (without costs)</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getAbsCashFlows"></a>



<h4>Method <code>getAbsCashFlows()</code>
</h4>

<p>Calculate the cash flows in monetary terms of the insurance contract
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getAbsCashFlows(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Once the premiums of the insurance contracts are calculated, all
cash flows can also be expressed in absolute terms. This function
calculates these time series in monetary terms, once the premiums
are calculated by the previous functions of this class.
</p>
<p>This method is NOT to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getAbsPresentValues"></a>



<h4>Method <code>getAbsPresentValues()</code>
</h4>

<p>Calculate the absolute present value time series of the insurance contract
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getAbsPresentValues(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Once the premiums of the insurance contracts are calculated, all
present values can also be expressed in absolute terms. This function
calculates these time series in monetary terms, once the premiums and the
unit-benefit present values are calculated by the previous functions of
this classe.
</p>
<p>This method is NOT to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-presentValueBenefits"></a>



<h4>Method <code>presentValueBenefits()</code>
</h4>

<p>Calculate the absolute present value time series of the
benefits of the insurance contract
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$presentValueBenefits(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Once the premiums of the insurance contracts are calculated, all
present values can also be expressed in absolute terms. This function
calculates these time series of the benefits present values in monetary
terms, once the premiums and the unit-benefit present values are calculated
by the previous functions of this classe.
</p>
<p>This method is NOT to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getPremiumCoefficients"></a>



<h4>Method <code>getPremiumCoefficients()</code>
</h4>

<p>Calculate the linear coefficients of the premium calculation formula for the insurance contract
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getPremiumCoefficients(
  type = "gross",
  coeffBenefits,
  coeffCosts,
  premiums,
  params,
  values,
  premiumCalculationTime = values$int$premiumCalculationTime
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>type</code></dt>
<dd>
<p>The premium that is supposed to be calculated ("gross", "Zillmer", "net")</p>
</dd>
<dt><code>coeffBenefits</code></dt>
<dd>
<p>(empty) data structure of the benefit coefficients.
The actual values have no meaning, this parameter is only used to
derive the required dimensions</p>
</dd>
<dt><code>coeffCosts</code></dt>
<dd>
<p>(empty) data structure of the cost coefficients. The
actual values have no meaning, this parameter is only used to
derive the required dimensions</p>
</dd>
<dt><code>premiums</code></dt>
<dd>
<p>The premium components that have already been calculated
(e.g. for net and Zillmer, the gross premium has already been
calculated to allow modelling the premium refund)</p>
</dd>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
<dt><code>premiumCalculationTime</code></dt>
<dd>
<p>The time when the premiums should be
(re-)calculated according to the equivalence principle. A time 0
means the initial premium calculation at contract closing, later
premium calculation times can be used to re-calculate the new
premium after a contract change (possibly including an existing reserve)</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
When <code>getPremiumCoefficients</code> is called, the <code>values$premiums</code>
array has NOT yet been filled! Instead, all premiums already calculated
(and required for the premium coefficients) are passed in the <code>premiums</code>
argument.
</p>


<hr>
<a id="method-InsuranceTarif-sumInsuredCalculation"></a>



<h4>Method <code>sumInsuredCalculation()</code>
</h4>

<p>Calculate the sumInsured of the InsuranceContract given the
parameters and premiums given and teh , present values already calculated and
stored in the <code>params</code> and <code>values</code> lists.
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$sumInsuredCalculation(
  params,
  values,
  calculationTime = values$int$premiumCalculationTime
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
<dt><code>calculationTime</code></dt>
<dd>
<p>the time when the sumInsured should be recalculated from the given premium</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-premiumCalculation"></a>



<h4>Method <code>premiumCalculation()</code>
</h4>

<p>Calculate the premiums of the InsuranceContract given the
parameters, present values and premium cofficients already calculated and
stored in the <code>params</code> and <code>values</code> lists.
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$premiumCalculation(
  params,
  values,
  premiumCalculationTime = values$int$premiumCalculationTime
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
<dt><code>premiumCalculationTime</code></dt>
<dd>
<p>The time when the premiums should be
(re-)calculated according to the equivalence principle. A time 0
means the initial premium calculation at contract closing, later
premium calculation times can be used to re-calculate the new
premium after a contract change (possibly including an existing reserve)</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-reserveCalculation"></a>



<h4>Method <code>reserveCalculation()</code>
</h4>

<p>Calculate the reserves of the InsuranceContract given the
parameters, present values and premiums already calculated and stored in
the <code>params</code> and <code>values</code> lists.
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$reserveCalculation(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getBalanceSheetReserveFactor"></a>



<h4>Method <code>getBalanceSheetReserveFactor()</code>
</h4>

<p>Calculate the (linear) interpolation factors for the balance
sheet reserve (Dec. 31) between the yearly contract closing dates
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getBalanceSheetReserveFactor(method, params, years = 1)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>method</code></dt>
<dd>
<p>The method for the balance sheet interpolation (30/360, act/act, act/360, act/365 or a function)</p>
</dd>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>years</code></dt>
<dd>
<p>how many years to calculate (for some usances, the factor
is different in leap years!)</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-reserveCalculationBalanceSheet"></a>



<h4>Method <code>reserveCalculationBalanceSheet()</code>
</h4>

<p>Calculate the reserves for the balance sheets at Dec. 31 of each
year by interpolation from the contract values calculated for
the yearly reference date of the contract
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$reserveCalculationBalanceSheet(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-calculateProfitParticipation"></a>



<h4>Method <code>calculateProfitParticipation()</code>
</h4>

<p>Calculate the profit participation given the contract
parameters and the already calculated reserves of the contract.
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$calculateProfitParticipation(params, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>Additional parameters for the profit participation calculation, passed
through to the profit participation scheme's <a href="../../LifeInsureR/html/ProfitParticipation.html#method-getProfitParticipation"><code>ProfitParticipation$getProfitParticipation()</code></a></p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-reservesAfterProfit"></a>



<h4>Method <code>reservesAfterProfit()</code>
</h4>

<p>Calculate the reserves after profit participation for the given profit scenario
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$reservesAfterProfit(profitScenario, params, values, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>profitScenario</code></dt>
<dd>
<p>The ID of the profit scenario for which to calculate the reserves</p>
</dd>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>TODO</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-getBasicDataTimeseries"></a>



<h4>Method <code>getBasicDataTimeseries()</code>
</h4>

<p>Return the time series of the basic contract
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$getBasicDataTimeseries(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
</p>


<hr>
<a id="method-InsuranceTarif-premiumDecomposition"></a>



<h4>Method <code>premiumDecomposition()</code>
</h4>

<p>Calculate the time series of the premium decomposition of the contract
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$premiumDecomposition(params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Not to be called directly, but implicitly by the InsuranceContract object.
All premiums, reserves and present values have already been calculated.
</p>


<hr>
<a id="method-InsuranceTarif-calculateFutureSums"></a>



<h4>Method <code>calculateFutureSums()</code>
</h4>

<p>Generic function to calculate future sums of the values
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$calculateFutureSums(cf, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>cf</code></dt>
<dd>
<p>The time series, for which future sums at all times are desired</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>currently unused</p>
</dd>
</dl>
</div>


<hr>
<a id="method-InsuranceTarif-calculatePresentValues"></a>



<h4>Method <code>calculatePresentValues()</code>
</h4>

<p>Calculate all present values for a given time series. The
mortalities are taken from the contract's parameters.
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$calculatePresentValues(cf, params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>cf</code></dt>
<dd>
<p>The time series, for which future present values at all
times are desired</p>
</dd>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>currently unused</p>
</dd>
</dl>
</div>


<hr>
<a id="method-InsuranceTarif-evaluateFrequencyLoading"></a>



<h4>Method <code>evaluateFrequencyLoading()</code>
</h4>

<p>Calculate the premium frequency loading, i.e. the surcharge
on the premium for those cases where the premium is not paid yearly.
Return values can be either a numeric value or a named list with all
possible premium frequencies as keys.
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$evaluateFrequencyLoading(loading, frequency, params, values)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>loading</code></dt>
<dd>
<p>The premiumFrequencyLoading parameter of the Contract or Tariff to be evaluated</p>
</dd>
<dt><code>frequency</code></dt>
<dd>
<p>The premiumFrequency parameter of the contract</p>
</dd>
<dt><code>params</code></dt>
<dd>
<p>Contract-specific, full set of parameters of the contract
(merged parameters of the defaults, the tariff, the profit participation
scheme and the contract)</p>
</dd>
<dt><code>values</code></dt>
<dd>
<p>Contract values calculated so far (in the <code>contract$Values</code>
list) then this method is called by the contract object</p>
</dd>
</dl>
</div>


<hr>
<a id="method-InsuranceTarif-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>InsuranceTarif$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R"># Define an insurance tariff for 10-year endowments, using a guaranteed interest
# rate of 1% and the Austrian population mortality table of the census 2011.
# Premiums are paid monthly in advance during the whole contract period.
MortalityTables::mortalityTables.load("Austria_Census")
# Cost structure:
#   - 4% up-front acquisition costs (of premium sum)
#   - 1% collection cost of each premium paid
#   - 1%o yearly administration cost (of the sum insured) as long as premiums are paid
#   - 2%o yearly administration cost for paid-up contracts
#   - 10 Euro yearly unit costs (as long as premiums are paid)
costs.endw = initializeCosts(alpha = 0.04, beta = 0.01, gamma = 0.001,
    gamma.paidUp = 0.002, gamma.premiumfree = 0.002, unitcosts = 10)

endowment.AT1 = InsuranceTarif$new(
    name = "Endow AT 1%", type = "endowment", tarif = "Austrian Endowment",
    desc = "An endowment for Austrian insured with 1% interest and no profit participation",
    ContractPeriod = 10,
    i = 0.01, mortalityTable = mort.AT.census.2011.unisex,
    costs = costs.endw, premiumFrequency = 12)

# The instantiation of the actual contract will provide the contract specific
# information and immediately calculate all further values:
ctr.end.AT1 = InsuranceContract$new(tarif = endowment.AT1,
    contractClosing = as.Date("2020-07-01"), age = 42)

# All values for the contract are already calculated during construction and
# stored in the ctr.end.AT1$Values list:
ctr.end.AT1$Values$basicData
ctr.end.AT1$Values$transitionProbabilities
ctr.end.AT1$Values$cashFlowsCosts
ctr.end.AT1$Values$presentValues
ctr.end.AT1$Values$premiums
ctr.end.AT1$Values$reserves
ctr.end.AT1$Values$premiumComposition
# etc.

## ------------------------------------------------
## Method `InsuranceTarif$new`
## ------------------------------------------------

MortalityTables::mortalityTables.load("Austria_Annuities_AVOe2005R")
tarif.male = InsuranceTarif$new(name = "Annuity Males", type = "annuity",
    i = 0.01, mortalityTable = AVOe2005R.male)

## ------------------------------------------------
## Method `InsuranceTarif$createModification`
## ------------------------------------------------

MortalityTables::mortalityTables.load("Austria_Annuities_AVOe2005R")
tarif.male = InsuranceTarif$new(name = "Annuity Males", type = "annuity",
    i = 0.01, mortalityTable = AVOe2005R.male)
tarif.unisex = tarif.male$createModification(name = "Annuity unisex",
    mortalityTable = AVOe2005R.unisex)

## ------------------------------------------------
## Method `InsuranceTarif$getParameters`
## ------------------------------------------------

tarif.male = InsuranceTarif$new(name = "Annuity Males", type = "annuity",
    i = 0.01, mortalityTable = AVOe2005R.male)
tarif.male$getParameters()
</code></pre>


</div>