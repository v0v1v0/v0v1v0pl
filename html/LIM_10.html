<div class="container">

<table style="width: 100%;"><tr>
<td>LIMBlending</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
A blending problem specification
</h2>

<h3>Description</h3>

<p>A manufacturer produces a feeding mix for pet animals.
</p>
<p>The feed mix contains two nutritive ingredients and one ingredient
(filler) to provide bulk.
</p>
<p>One kg of feed mix must contain a minimum quantity of each of four
nutrients as below:
</p>

<table>
<tr>
<td style="text-align: right;">
       </td>
<td style="text-align: left;"> Nutrient  </td>
<td style="text-align: left;"> A  </td>
<td style="text-align: left;"> B  </td>
<td style="text-align: left;"> C  </td>
<td style="text-align: left;"> D </td>
</tr>
<tr>
<td style="text-align: right;">
       </td>
<td style="text-align: left;"> gram      </td>
<td style="text-align: left;"> 80 </td>
<td style="text-align: left;"> 50 </td>
<td style="text-align: left;"> 25 </td>
<td style="text-align: left;"> 5 </td>
</tr>
<tr>
<td style="text-align: right;">
       </td>
</tr>
</table>
<p>The ingredients have the following nutrient values and cost
</p>

<table>
<tr>
<td style="text-align: right;">
 </td>
<td style="text-align: left;">  (gram/kg)    </td>
<td style="text-align: left;"> A   </td>
<td style="text-align: left;">   B </td>
<td style="text-align: left;"> C  </td>
<td style="text-align: left;"> D    </td>
<td style="text-align: left;"> Cost/kg </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
<td style="text-align: left;"> Ingredient 1  </td>
<td style="text-align: left;"> 100 </td>
<td style="text-align: left;">  50 </td>
<td style="text-align: left;"> 40 </td>
<td style="text-align: left;"> 10   </td>
<td style="text-align: left;"> 40  </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
<td style="text-align: left;"> Ingredient 2  </td>
<td style="text-align: left;"> 200 </td>
<td style="text-align: left;"> 150 </td>
<td style="text-align: left;"> 10 </td>
<td style="text-align: left;">  -   </td>
<td style="text-align: left;"> 60  </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
<td style="text-align: left;"> Filler        </td>
<td style="text-align: left;"> -   </td>
<td style="text-align: left;"> -   </td>
<td style="text-align: left;"> -  </td>
<td style="text-align: left;">  -   </td>
<td style="text-align: left;"> 0   </td>
</tr>
<tr>
<td style="text-align: right;">
       </td>
</tr>
</table>
<p>The linear inverse models LIMBlending and LIMinputBlending are generated
from the file Blending.input
which can be found in subdirectory <code>/examples/LinearProg</code> of the
package directory
</p>
<p>LIMBlending is generated by function <code>Setup</code>
</p>
<p>LIMinputBlending is generated by function <code>Read</code>
</p>
<p>The problem is to find the composition of the feeding mix that minimises
the production costs subject to the constraints above.
</p>
<p>Stated otherwise: what is the optimal amount of ingredients in one kg
of feeding mix?
</p>
<p>Mathematically this can be estimated by solving a linear programming problem:
</p>
<p style="text-align: center;"><code class="reqn">\min(\sum {Cost_i*x_i})</code>
</p>
<p> subject to
</p>
<p style="text-align: center;"><code class="reqn">x_i&gt;=0</code>
</p>

<p style="text-align: center;"><code class="reqn">Ex=f</code>
</p>

<p style="text-align: center;"><code class="reqn">Gx&gt;=h</code>
</p>

<p>Where the <code>Cost</code> (to be minimised) is given by:
</p>
<p style="text-align: center;"><code class="reqn">x_1*40+x_2*60</code>
</p>

<p>The <code>equality</code> ensures that the sum of the three fractions equals 1:
</p>
<p style="text-align: center;"><code class="reqn">1 = x_1+x_2+x_3</code>
</p>

<p>And the <code>inequalities</code> enforce the nutritional constraints:
</p>
<p style="text-align: center;"><code class="reqn">100*x_1+200*x_2&gt;80</code>
</p>

<p style="text-align: center;"><code class="reqn">50*x_1+150*x_2&gt;50</code>
</p>

<p>and so on
</p>
<p>The solution is Ingredient1 (x1) = 0.5909, Ingredient2 (x2)=0.1364
and Filler (x3)=0.2727.
</p>


<h3>Usage</h3>

<pre><code class="language-R">LIMBlending
LIMinputBlending
</code></pre>


<h3>Format</h3>

<p>LIMBlending is of type <code>lim</code>, which is a list of matrices,
vectors, names and values that specify the linear inverse model problem.
</p>
<p>see the return value of <code>Setup</code> for more information about
this list
</p>
<p>LIMinputBlending is of type <code>liminput</code>, see the return value of
<code>Read</code> for more information.
</p>
<p>A more complete description of these structures is in vignette("LIM")
</p>


<h3>Author(s)</h3>

<p>Karline Soetaert &lt;karline.soetaert@nioz.nl&gt;
</p>


<h3>See Also</h3>

<p>browseURL(paste(system.file(package="LIM"), "/doc/examples/LinearProg/", sep=""))
</p>
<p>contains "blending.input", the input file; read this with <code>Setup</code>
</p>
<p><code>LIMTakapoto</code>, <code>LIMEcoli</code> and many others
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# 1. Solve the model with linear programming
res &lt;- Linp(LIMBlending, ispos = TRUE)

# show results
print(c(res$X, Cost = res$solutionNorm))


# 2. Possible ranges of the three ingredients
(xr &lt;- Xranges(LIMBlending, ispos = TRUE))
Nx &lt;- LIMBlending$NUnknowns

# plot
dotchart(x = as.vector(res$X), xlim = range(xr),
         labels = LIMBlending$Unknowns,
         main = "Optimal blending with ranges",
         sub = "using linp and xranges", pch = 16)
segments(xr[ ,1], 1:Nx, xr[ ,2], 1:Nx)
legend  ("topright", pch = c(16, NA), lty = c(NA, 1),
          legend = c("Minimal cost", "range"))

# 3. Random sample of the three ingredients
# The inequality that all x &gt; 0 has to be added!
blend   &lt;- LIMBlending
blend$G &lt;- rbind(blend$G, diag(3))
blend$H &lt;- c(blend$H, rep(0, 3))

xs &lt;- Xsample(blend)

pairs(xs, main = "Blending, 3000 solutions with xsample")
</code></pre>


</div>