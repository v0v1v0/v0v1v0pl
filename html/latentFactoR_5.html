<div class="container">

<table style="width: 100%;"><tr>
<td>add_population_error</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adds Population Error to <code>simulate_factors</code> Data</h2>

<h3>Description</h3>

<p>Adds population error to simulated data from <code>simulate_factors</code>.
See examples to get started
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_population_error(
  lf_object,
  cfa_method = c("minres", "ml"),
  fit = c("cfi", "rmsea", "rmsr", "raw"),
  misfit = c("close", "acceptable"),
  error_method = c("cudeck", "yuan"),
  tolerance = 0.01,
  convergence_iterations = 10,
  leave_cross_loadings = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>lf_object</code></td>
<td>
<p>Data object from <code>simulate_factors</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfa_method</code></td>
<td>
<p>Character (length = 1).
Method to generate population error.
Defaults to <code>"minres"</code>.
Available options:
</p>

<ul>
<li> <p><code>"minres"</code> — Minimum residual
</p>
</li>
<li> <p><code>"ml"</code> — Maximum likelihood
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>Character (length = 1).
Fit index to control population error.
Defaults to <code>"rmsr"</code>.
Available options:
</p>

<ul>
<li> <p><code>"cfi"</code> — Comparative fit index
</p>
</li>
<li> <p><code>"rmsea"</code> — Root mean square error of approximation
</p>
</li>
<li> <p><code>"rmsr"</code> — Root mean square residuals
</p>
</li>
<li> <p><code>"raw"</code> — Direct application of error
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>misfit</code></td>
<td>
<p>Character or numeric (length = 1).
Magnitude of error to add.
Defaults to <code>"close"</code>.
Available options:
</p>

<ul>
<li> <p><code>"close"</code> — Slight deviations from original population correlation matrix
</p>
</li>
<li> <p><code>"acceptable"</code> — Moderate deviations from original population correlation matrix
</p>
</li>
</ul>
<p>While numbers can be used, they are <strong>not</strong> recommended. They can be
used to specify misfit but the level of misfit will vary depending
on the factor structure</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_method</code></td>
<td>
<p>Character (length = 1).
Method to control population error.
Defaults to <code>"cudeck"</code>.
Description of methods:
</p>

<ul>
<li> <p><code>"cudeck"</code> — Description coming soon... see Cudeck &amp; Browne, 1992
for more details
</p>
</li>
<li> <p><code>"yuan"</code> — Description coming soon...
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tolerance</code></td>
<td>
<p>Numeric (length = 1).
Tolerance of SRMR difference between population error
correlation matrix and the original population correlation
matrix. Ensures that appropriate population error
was added. Similarly, verifies that the MAE of the
loadings are not greater than the specified amount,
ensuring proper convergence.
Defaults to <code>0.01</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>convergence_iterations</code></td>
<td>
<p>Numeric (length = 1).
Number of iterations to reach parameter convergence
within the specified 'tolerance'.
Defaults to <code>10</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leave_cross_loadings</code></td>
<td>
<p>Boolean.
Should cross-loadings be kept?
Defaults to <code>FALSE</code>.
Convergence problems can arise if cross-loadings are kept,
so setting them to zero is the default. Only set to <code>TRUE</code>
with careful consideration of the structure. Make sure to perform
additional checks that the data are adequate</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a list containing:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Simulated data from the specified factor model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>population_correlation</code></td>
<td>
<p>Population correlation matrix with local dependence added</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>population_error</code></td>
<td>

<p>A list containing the parameters used to generate population error:
</p>

<ul>
<li> <p><code>error_correlation</code> — Correlation matrix with population
error added (same as <code>population_correlation</code>)
</p>
</li>
<li> <p><code>fit</code> — Fit measure used to control population error
</p>
</li>
<li> <p><code>delta</code> — Minimum of the objective function corresponding
to the misfit value
</p>
</li>
<li> <p><code>misfit</code> — Specified misfit value
</p>
</li>
<li> <p><code>loadings</code> — Estiamted CFA loadings after error has been added
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>original_results</code></td>
<td>
<p>Original <code>lf_object</code> input into function</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p><code>bifactor</code> authors <br>
Marcos Jimenez,
Francisco J. Abad,
Eduardo Garcia-Garzon,
Vithor R. Franco,
Luis Eduardo Garrido &lt;luisgarrido@pucmm.edu&gt;
</p>
<p><code>latentFactoR</code> authors <br>
Alexander P. Christensen &lt;alexpaulchristensen@gmail.com&gt;,
Hudson Golino &lt;hfg9s@virginia.edu&gt;,
Luis Eduardo Garrido &lt;luisgarrido@pucmm.edu&gt;,
Marcos Jimenez,
Francisco J. Abad,
Eduardo Garcia-Garzon,
Vithor R. Franco
</p>


<h3>References</h3>

<p>Cudeck, R., &amp; Browne, M.W. (1992).
Constructing a covariance matrix that yields a specified minimizer and a specified minimum discrepancy function value.
<em>Psychometrika</em>, <em>57</em>, 357–369.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Generate factor data
two_factor &lt;- simulate_factors(
  factors = 2, # factors = 2
  variables = 6, # variables per factor = 6
  loadings = 0.55, # loadings between = 0.45 to 0.65
  cross_loadings = 0.05, # cross-loadings N(0, 0.05)
  correlations = 0.30, # correlation between factors = 0.30
  sample_size = 1000 # number of cases = 1000
)

# Add small population error using Cudeck method
two_factor_Cudeck &lt;- add_population_error(
  lf_object = two_factor,
  cfa_method = "minres",
  fit = "rmsr", misfit = "close",
  error_method = "cudeck"
)

# Add small population error using Yuan method
two_factor_Yuan &lt;- add_population_error(
  lf_object = two_factor,
  cfa_method = "minres",
  fit = "rmsr", misfit = "close",
  error_method = "yuan"
)

</code></pre>


</div>