<div class="container">

<table style="width: 100%;"><tr>
<td>natural_key</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create SQL string for joining on matching natural keys</h2>

<h3>Description</h3>

<p>Create string with SQL expressions for <code>WHERE</code> clause
to join two tables on the given columns.
</p>


<h3>Usage</h3>

<pre><code class="language-R">natural_key(table_names, key_columns)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>table_names</code></td>
<td>
<p>[character(2)]<br>
Name of data base tables to be joined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key_columns</code></td>
<td>
<p>[character(1:Inf)]<br>
Names of key columns in both tables.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The names of tables and key columns must be valid SQL identifiers.
They are validated to conform to
the regular expression returned by <code>valid_identifier_regex</code>.
</p>
<p>The SQL string is created in 3 steps:
</p>

<ol>
<li>
<p> Combine table names with key names, eg, "<code>PRL.FLIGHT_NR</code>".
</p>
</li>
<li>
<p> Create logical expressions, eg, "<code>PRL.FLIGHT_NR = PRL_SSR.FLIGHT_NR</code>"
</p>
</li>
<li>
<p> Concatenate logical expressions by <code>"and"</code> to form final SQL esxpression.
</p>
</li>
</ol>
<h3>Value</h3>

<p>Character string to be used in SQL statement.
</p>


<h3>Note</h3>

<p>The current implementation assumes that key columns have the same names in both tables.
</p>


<h3>Author(s)</h3>

<p>Uwe Block
</p>


<h3>See Also</h3>

<p><code>valid_identifier_regex</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># SQL expression
(sql_expr &lt;- lazysql::natural_key(c("TAB1", "tab_2"),c("COL1", "col_2")))

# sample SQL JOIN statement
paste("select * from TAB1, TAB2 where", sql_expr)

</code></pre>


</div>