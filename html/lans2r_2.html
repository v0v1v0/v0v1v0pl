<div class="container">

<table style="width: 100%;"><tr>
<td>calculate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate derived data</h2>

<h3>Description</h3>

<p>This function allows easy calculation of any quantities derived from other variables. The new quantities can be assigned to a specific data_type and values, errors as well as the resulting variable names are calculated/constructed based on custom functions that can be provided via the function parameters.
calculate_sums, calculate_ratios and calculate_abundances are all based on this and provide an easy way for common standard calculations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">calculate(
  data,
  data_type,
  ...,
  value_fun,
  error_fun = function(...) return(NA),
  name_fun = default_name,
  filter_new = NULL,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame with lans2r data, can be grouped to do calculations within individual groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_type</code></td>
<td>
<p>what to call the new data type</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>the parameters to send to the value, error and naming function for each derived value. These are always expressions that can include references to variable columns, arithmetic and constants, e.g. c(<code style="white-space: pre;">⁠12C⁠</code>, <code style="white-space: pre;">⁠13C⁠</code>) or c("test", 100*(<code style="white-space: pre;">⁠12C⁠</code>+<code style="white-space: pre;">⁠13C⁠</code>)). The number of parameters needs to match those expected by the value, error and name functions. Error values of different columns (say for classical error propagation) can be addressed using the suffix "sigma", e.g. c(<code style="white-space: pre;">⁠12C⁠</code>, <code style="white-space: pre;">⁠12C sigma⁠</code>) would pass both the value and error of this variable to the functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value_fun</code></td>
<td>
<p>a custom function used to calculate the derived value - needs to match the sets of parameters provided through ...</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_fun</code></td>
<td>
<p>a custom function used to calculate the error (sigma) for the derived value - needs to match the sets of parameters provided through ...</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name_fun</code></td>
<td>
<p>a custom function used to construct the variable name for the derived quantity - needs to match the sets of parameters provided through ...</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_new</code></td>
<td>
<p>an expression to apply as a filter on the new data rows (e.g. plane == "all")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>whether the function should output information messages or be quiet (default is to output)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>the original data frame with the newly calculated information appended (data_type == "ion_sum")
</p>


<h3>See Also</h3>

<p>Other calculations: 
<code>calculate_abundances()</code>,
<code>calculate_ratios()</code>,
<code>calculate_sums()</code>
</p>


</div>